steps:
- checkout: self
    clean: true

- task: UseDotNet@2
    displayName: 'Use .NET Core sdk 3.1.x'
    inputs:
    version: 3.1.x

- script: |
    dotnet publish build/tools/AutoUpdater/AutoUpdater.csproj -c Release -o /tmp/autoupdater
    newPath="/tmp/autoupdater:$PATH"
    echo "##vso[task.setvariable variable=[PATH];]$newPath"
  displayName: 'Publish AutoUpdater and set in path'

- script: |
    autoupdater digest
  displayName: 'Check GitHub runners digest and send out PullRequest if needed'

